---
  - name: JCL Banner
    hosts: 127.0.0.1
    gather_facts: no
    roles:
      - jcl_banner
  - name: Save config from Juniper devices
    hosts: juniper
    become: yes
    connection: juniper.device.pyez
    gather_facts: true
    pre_tasks:
     - name: Getting encrypted password from device
       script: ./python_scripts/get-encrypted-password.py --host {{ junos_host }} --username {{ junos_username }} --password {{ junos_passwd }}
       register: result
     - set_fact: encrypted_password={{ result.stdout | replace('\n', '') | replace(' ', '') | replace('$', '\$') }}
    roles:
     - get_junos_config
     - templatize

  - name: Spirent ReST Calls to save Spirent config
    become: yes
    hosts: spirent
    gather_facts: no
    roles:
     - check_python_version_role
     - save_spirent_config
     - get_spirent_session
     - spirent_controller_quit

  - name: Ixia ReST Calls to save ixia config as ixncfg
    become: yes
    hosts: IxiaGUI
    gather_facts: no
    roles:
     - save_ixia_config

  - name: CyberFlood ReST Calls to save CyberFlood config as cyberflood.zip
    become: yes
    hosts: cyberflood
    gather_facts: no
    roles:
     - save_cyberflood_config
