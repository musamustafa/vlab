
## Last commit: 2020-05-07 10:12:40 UTC by jcluser
version 20191212.201431_builder.r1074901;
system {
    host-name vMX-addr-5;
    root-authentication {
        encrypted-password "$6$B6Gd/PJU$yPPJaFBt6ImOHpIIYGkB413X2QWzYzGKxdjXltRatoAsvR9/.cMDSs9mexy6ZBa1i83mQ1xxbT3Tn9hTtzYOW.";
    }
    scripts {
        language python;
    }
    login {
        user jcluser {
            uid 2000;
            class super-user;
            authentication {
                encrypted-password "$6$7rmbaWhB$QSsd9lpzkDZEV/ebNdv4U37un2hGiVSP1WMChfTjys.N9U7TjA8ezyrEQVsGaJiLgIikVJFVfhV/OAnf4.ssM1";
            }
        }
    }
    services {
        ftp;
        ssh {
            root-login allow;
            protocol-version v2;
        }
        telnet;
        xnm-clear-text;
        netconf {
            ssh;
        }
        rest {
            http {
                port 3000;
            }
            enable-explorer;
        }
    }
    syslog {
        user * {
            any emergency;
        }
        host 7.105.200.4 {
            daemon info;
            port 1514;
            source-address 7.0.0.105;
            match-strings RPM_TEST_RESULTS;
        }
        file messages {
            any info;
            authorization info;
        }
        file interactive-commands {
            interactive-commands any;
        }
    }
    processes {
        dhcp-service {
            traceoptions {
                file dhcp_logfile size 10m;
                level all;
                flag packet;
            }
        }
    }
}
chassis {
    fpc 0 {
        pic 0 {
            number-of-ports 8;
        }
        lite-mode;
    }
    network-services enhanced-ip;
}
services {
    analytics {
        streaming-server ns {
            remote-address 7.105.200.4;
            remote-port 3000;
        }
        export-profile ns {
            local-address 7.0.0.105;
            local-port 22222;
            reporting-rate 1;
            format gpb;
            transport udp;
        }
        sensor ifd {
            server-name ns;
            export-name ns;
            resource /junos/system/linecard/interface/;
        }
        sensor ifl {
            server-name ns;
            export-name ns;
            resource /junos/system/linecard/interface/logical/usage/;
        }
        sensor lsp {
            server-name ns;
            export-name ns;
            resource /junos/services/label-switched-path/usage/;
        }
        sensor sid-egress {
            server-name ns;
            export-name ns;
            resource /junos/services/segment-routing/sid/egress/usage/;
        }
        sensor sr-te-color {
            server-name ns;
            export-name ns;
            resource /junos/services/segment-routing/traffic-engineering/ingress/usage/;
        }
        sensor sr-te {
            server-name ns;
            export-name ns;
            resource /junos/services/segment-routing/traffic-engineering/tunnel/ingress/usage/;
        }
        sensor sid {
            server-name ns;
            export-name ns;
            resource /junos/services/segment-routing/sid/usage/;
        }
    }
    rpm {
        probe northstar-ifl {
            test {{ topo[inventory_hostname]["Port0"]["name"] }}.0 {
                target address 7.101.105.1;
                probe-count 2;
                probe-interval 2;
                test-interval 15;
                source-address 7.101.105.2;
                moving-average-size 12;
                traps test-completion;
            }
            test {{ topo[inventory_hostname]["Port1"]["name"] }}.0 {
                target address 7.102.105.1;
                probe-count 2;
                probe-interval 2;
                test-interval 15;
                source-address 7.102.105.2;
                moving-average-size 12;
                traps test-completion;
            }
            test {{ topo[inventory_hostname]["Port3"]["name"] }}.0 {
                target address 7.105.106.2;
                probe-count 2;
                probe-interval 2;
                test-interval 15;
                source-address 7.105.106.1;
                moving-average-size 12;
                traps test-completion;
            }
        }
    }
}
interfaces {
    interface-range int-mpiso {
        member-range {{ topo[inventory_hostname]["Port0"]["name"] }} to {{ topo[inventory_hostname]["Port6"]["name"] }};
        unit 0 {
            family iso;
            family mpls;
        }
    }
    {{ topo[inventory_hostname]["Port0"]["name"] }} {
        description vmx1-vmx5;
        unit 0 {
            family inet {
                address 7.101.105.2/30;
            }
        }
    }
    {{ topo[inventory_hostname]["Port1"]["name"] }} {
        description vmx2-vmx5;
        unit 0 {
            family inet {
                address 7.102.105.2/30;
            }
        }
    }
    inactive: {{ topo[inventory_hostname]["Port2"]["name"] }} {
        description vmx3-vmx5;
        unit 0 {
            family inet {
                address 7.103.105.2/30;
            }
        }
    }
    {{ topo[inventory_hostname]["Port3"]["name"] }} {
        description vmx5-vmx6;
        unit 0 {
            family inet {
                address 7.105.106.1/30;
            }
        }
    }
    {{ topo[inventory_hostname]["Port4"]["name"] }} {
        description "to vrr";
        unit 0 {
            family inet {
                address 7.105.199.5/24;
            }
        }
    }
    inactive: {{ topo[inventory_hostname]["Port5"]["name"] }} {
        description vmx5-vmx7;
        unit 0 {
            family inet {
                address 7.105.107.1/30;
            }
        }
    }
    {{ topo[inventory_hostname]["Port6"]["name"] }} {
        description "northstar syslog jti";
        unit 0 {
            family inet {
                address 7.105.200.5/24;
            }
        }
    }
    fxp0 {
        unit 0 {
            family inet {
                address {{ junos_host }}/{{ mgmt_sub_mask }};
            }
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 127.0.0.1/32;
                address 7.0.0.105/32 {
                    primary;
                }
            }
            family iso {
                address 49.0007.0070.0000.0105.00;
            }
            family mpls;
        }
    }
}
event-options {
    event-script {
        file rpm-log.slax;
    }
}
policy-options {
    policy-statement bgp {
        from protocol bgp;
        then accept;
    }
    policy-statement bgp-ls-export {
        term 1 {
            from family traffic-engineering;
            then accept;
        }
    }
    policy-statement export-lo0 {
        term 1 {
            from {
                route-filter 7.0.0.0/24 prefix-length-range /32-/32;
            }
            then accept;
        }
    }
    policy-statement isis-te {
        term 1 {
            from protocol isis;
            to family traffic-engineering;
            then accept;
        }
    }
    policy-statement l1-to-l2 {
        term 1 {
            from {
                protocol isis;
                level 1;
            }
            to level 2;
            then accept;
        }
    }
    policy-statement ospf-te {
        term 1 {
            from protocol ospf;
            to family traffic-engineering;
            then accept;
        }
    }
    policy-statement pplb {
        then {
            load-balance per-packet;
        }
    }
    policy-statement reject-bgp-ls {
        from family traffic-engineering;
        then reject;
    }
    policy-statement supernet {
        term 1 {
            from {
                route-filter 7.0.0.0/8 exact;
            }
            then accept;
        }
    }
}
routing-options {
    srlg {
        srlg-100 {
            srlg-value 100;
            srlg-cost 50;
        }
        srlg-407 {
            srlg-value 407;
            srlg-cost 50;
        }
    }
    static {
        route 0.0.0.0/0 next-hop {{ mgmt_sub_gw }};
        route 7.0.0.0/8 discard;
        route 172.16.16.1/32 next-hop 7.105.199.4;
    }
    forwarding-table {
        export pplb;
    }
    router-id 7.0.0.105;
    autonomous-system 100;
}
protocols {
    isis {
        backup-spf-options {
            use-post-convergence-lfa;
        }
        traffic-engineering {
            igp-topology;
            advertisement always;
        }
        source-packet-routing {
            sensor-based-stats {
                per-interface-per-member-link ingress egress;
                per-sid ingress egress;
            }
            srgb start-label 400000 index-range 4000;
            node-segment ipv4-index 2005;
        }
        level 2 wide-metrics-only;
        level 1 wide-metrics-only;
        interface {{ topo[inventory_hostname]["Port0"]["name"] }}.0 {
            point-to-point;
            level 2 disable;
            level 1 {
                ipv4-adjacency-segment {
                    unprotected label 1051;
                }
            }
        }
        interface {{ topo[inventory_hostname]["Port1"]["name"] }}.0 {
            point-to-point;
            level 1 disable;
            level 2 {
                ipv4-adjacency-segment {
                    unprotected label 1052;
                }
            }
        }
        inactive: interface {{ topo[inventory_hostname]["Port2"]["name"] }}.0 {
            point-to-point;
            level 2 disable;
        }
        interface {{ topo[inventory_hostname]["Port3"]["name"] }}.0 {
            point-to-point;
            level 1 disable;
            level 2 {
                metric 100;
                ipv4-adjacency-segment {
                    unprotected label 1056;
                }
            }
        }
        interface {{ topo[inventory_hostname]["Port4"]["name"] }}.0 {
            point-to-point;
            level 2 metric 1000;
            level 1 disable;
        }
        inactive: interface {{ topo[inventory_hostname]["Port5"]["name"] }}.0 {
            point-to-point;
            level 2 disable;
        }
        interface {{ topo[inventory_hostname]["Port6"]["name"] }}.0 {
            passive;
            level 1 disable;
        }
        interface em0.0 {
            disable;
        }
        interface lo0.0;
        export [ supernet export-lo0 ];
    }
    inactive: rsvp {
        interface all;
        interface fxp0.0 {
            disable;
        }
    }
    source-packet-routing {
        inherit-label-nexthops;
        telemetry {
            statistics;
        }
    }
    bgp {
        group northstar {
            type internal;
            local-address 7.105.199.5;
            family traffic-engineering {
                unicast;
            }
            export bgp-ls-export;
            neighbor 7.105.199.4;
        }
    }
    mpls {
        statistics {
            file lsp.stat size 5m files 2;
        }
        traffic-engineering {
            database {
                import {
                    igp-topology {
                        bgp-link-state;
                    }
                    policy isis-te;
                }
            }
        }
        icmp-tunneling;
        label-range {
            static-label-range 1000 1999;
        }
        interface all;
        interface fxp0.0 {
            disable;
        }
        interface {{ topo[inventory_hostname]["Port0"]["name"] }}.0 {
            srlg srlg-100;
        }
        interface {{ topo[inventory_hostname]["Port1"]["name"] }}.0 {
            srlg srlg-100;
        }
    }
    lldp {
        port-id-subtype interface-name;
        interface all;
    }
}
